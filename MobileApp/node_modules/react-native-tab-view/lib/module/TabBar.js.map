{"version":3,"sources":["TabBar.tsx"],"names":["React","StyleSheet","View","I18nManager","Platform","Animated","TabBarItem","TabBarIndicator","memoize","TabBar","state","layout","width","height","tabWidths","measuredTabWidths","scrollAmount","Value","getFlattenedTabWidth","style","tabStyle","flatten","undefined","getComputedTabWidth","index","routes","scrollEnabled","flattenedWidth","key","endsWith","parseFloat","Number","isFinite","length","getMemoizedTabWidthGettter","i","getMaxScrollDistance","tabBarWidth","layoutWidth","getTabBarWidth","props","navigationState","reduce","acc","_","normalizeScrollValue","value","maxDistance","scrollValue","Math","max","min","OS","isRTL","getScrollAmount","centerDistance","Array","from","total","tabWidth","resetScroll","scrollView","scrollTo","x","animated","handleLayout","e","nativeEvent","setState","getTranslateX","maxScrollDistance","multiply","sub","prevProps","prevState","every","r","position","jumpTo","bounces","getAccessibilityLabel","getAccessible","getLabelText","getTestID","renderBadge","renderIcon","renderLabel","activeColor","inactiveColor","pressColor","pressOpacity","onTabPress","onTabLongPress","labelStyle","indicatorStyle","contentContainerStyle","indicatorContainerStyle","isWidthDynamic","tabBarWidthPercent","translateX","styles","tabBar","indicatorContainer","transform","renderIndicator","getTabWidth","scroll","tabContent","container","event","contentOffset","el","getNode","map","route","defaultPrevented","preventDefault","Component","defaultProps","title","toUpperCase","accessible","accessibilityLabel","testID","create","flex","overflow","backgroundColor","elevation","shadowColor","shadowOpacity","shadowRadius","hairlineWidth","shadowOffset","zIndex","flexDirection","flexWrap","top","left","right","bottom"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  StyleSheet,\n  View,\n  ScrollView,\n  StyleProp,\n  ViewStyle,\n  TextStyle,\n  LayoutChangeEvent,\n  I18nManager,\n  Platform,\n} from 'react-native';\nimport Animated from 'react-native-reanimated';\nimport TabBarItem from './TabBarItem';\nimport TabBarIndicator, { Props as IndicatorProps } from './TabBarIndicator';\nimport memoize from './memoize';\nimport {\n  Route,\n  Scene,\n  SceneRendererProps,\n  NavigationState,\n  Layout,\n  Event,\n} from './types';\n\nexport type Props<T extends Route> = SceneRendererProps & {\n  navigationState: NavigationState<T>;\n  scrollEnabled?: boolean;\n  bounces?: boolean;\n  activeColor?: string;\n  inactiveColor?: string;\n  pressColor?: string;\n  pressOpacity?: number;\n  getLabelText: (scene: Scene<T>) => string | undefined;\n  getAccessible: (scene: Scene<T>) => boolean | undefined;\n  getAccessibilityLabel: (scene: Scene<T>) => string | undefined;\n  getTestID: (scene: Scene<T>) => string | undefined;\n  renderLabel?: (\n    scene: Scene<T> & {\n      focused: boolean;\n      color: string;\n    }\n  ) => React.ReactNode;\n  renderIcon?: (\n    scene: Scene<T> & {\n      focused: boolean;\n      color: string;\n    }\n  ) => React.ReactNode;\n  renderBadge?: (scene: Scene<T>) => React.ReactNode;\n  renderIndicator: (props: IndicatorProps<T>) => React.ReactNode;\n  onTabPress?: (scene: Scene<T> & Event) => void;\n  onTabLongPress?: (scene: Scene<T>) => void;\n  tabStyle?: StyleProp<ViewStyle>;\n  indicatorStyle?: StyleProp<ViewStyle>;\n  indicatorContainerStyle?: StyleProp<ViewStyle>;\n  labelStyle?: StyleProp<TextStyle>;\n  contentContainerStyle?: StyleProp<ViewStyle>;\n  style?: StyleProp<ViewStyle>;\n};\n\ntype State = {\n  layout: Layout;\n  tabWidths: { [key: string]: number };\n};\n\nexport default class TabBar<T extends Route> extends React.Component<\n  Props<T>,\n  State\n> {\n  static defaultProps = {\n    getLabelText: ({ route }: Scene<Route>) =>\n      typeof route.title === 'string' ? route.title.toUpperCase() : route.title,\n    getAccessible: ({ route }: Scene<Route>) =>\n      typeof route.accessible !== 'undefined' ? route.accessible : true,\n    getAccessibilityLabel: ({ route }: Scene<Route>) =>\n      typeof route.accessibilityLabel === 'string'\n        ? route.accessibilityLabel\n        : typeof route.title === 'string'\n        ? route.title\n        : undefined,\n    getTestID: ({ route }: Scene<Route>) => route.testID,\n    renderIndicator: (props: IndicatorProps<Route>) => (\n      <TabBarIndicator {...props} />\n    ),\n  };\n\n  state: State = {\n    layout: { width: 0, height: 0 },\n    tabWidths: {},\n  };\n\n  componentDidUpdate(prevProps: Props<T>, prevState: State) {\n    const { navigationState } = this.props;\n    const { layout, tabWidths } = this.state;\n\n    if (\n      prevProps.navigationState.routes.length !==\n        navigationState.routes.length ||\n      prevProps.navigationState.index !== navigationState.index ||\n      prevState.layout.width !== layout.width ||\n      prevState.tabWidths !== tabWidths\n    ) {\n      if (\n        this.getFlattenedTabWidth(this.props.tabStyle) === 'auto' &&\n        !(\n          layout.width &&\n          navigationState.routes.every(\n            r => typeof tabWidths[r.key] === 'number'\n          )\n        )\n      ) {\n        // When tab width is dynamic, only adjust the scroll once we have all tab widths and layout\n        return;\n      }\n\n      this.resetScroll(navigationState.index);\n    }\n  }\n\n  // to store the layout.width of each tab\n  // when all onLayout's are fired, this would be set in state\n  private measuredTabWidths: { [key: string]: number } = {};\n\n  private scrollAmount = new Animated.Value(0);\n\n  private scrollView: ScrollView | undefined;\n\n  private getFlattenedTabWidth = (style: StyleProp<ViewStyle>) => {\n    const tabStyle = StyleSheet.flatten(style);\n\n    return tabStyle ? tabStyle.width : undefined;\n  };\n\n  private getComputedTabWidth = (\n    index: number,\n    layout: Layout,\n    routes: Route[],\n    scrollEnabled: boolean | undefined,\n    tabWidths: { [key: string]: number },\n    flattenedWidth: string | number | undefined\n  ) => {\n    if (flattenedWidth === 'auto') {\n      return tabWidths[routes[index].key] || 0;\n    }\n\n    switch (typeof flattenedWidth) {\n      case 'number':\n        return flattenedWidth;\n      case 'string':\n        if (flattenedWidth.endsWith('%')) {\n          const width = parseFloat(flattenedWidth);\n          if (Number.isFinite(width)) {\n            return layout.width * (width / 100);\n          }\n        }\n    }\n\n    if (scrollEnabled) {\n      return (layout.width / 5) * 2;\n    }\n\n    return layout.width / routes.length;\n  };\n\n  private getMemoizedTabWidthGettter = memoize(\n    (\n      layout: Layout,\n      routes: Route[],\n      scrollEnabled: boolean | undefined,\n      tabWidths: { [key: string]: number },\n      flattenedWidth: string | number | undefined\n    ) => (i: number) =>\n      this.getComputedTabWidth(\n        i,\n        layout,\n        routes,\n        scrollEnabled,\n        tabWidths,\n        flattenedWidth\n      )\n  );\n\n  private getMaxScrollDistance = (tabBarWidth: number, layoutWidth: number) =>\n    tabBarWidth - layoutWidth;\n\n  private getTabBarWidth = (props: Props<T>, state: State) => {\n    const { layout, tabWidths } = state;\n    const { scrollEnabled, tabStyle } = props;\n    const { routes } = props.navigationState;\n\n    return routes.reduce<number>(\n      (acc, _, i) =>\n        acc +\n        this.getComputedTabWidth(\n          i,\n          layout,\n          routes,\n          scrollEnabled,\n          tabWidths,\n          this.getFlattenedTabWidth(tabStyle)\n        ),\n      0\n    );\n  };\n\n  private normalizeScrollValue = (\n    props: Props<T>,\n    state: State,\n    value: number\n  ) => {\n    const { layout } = state;\n    const tabBarWidth = this.getTabBarWidth(props, state);\n    const maxDistance = this.getMaxScrollDistance(tabBarWidth, layout.width);\n    const scrollValue = Math.max(Math.min(value, maxDistance), 0);\n\n    if (Platform.OS === 'android' && I18nManager.isRTL) {\n      // On Android, scroll value is not applied in reverse in RTL\n      // so we need to manually adjust it to apply correct value\n      return maxDistance - scrollValue;\n    }\n\n    return scrollValue;\n  };\n\n  private getScrollAmount = (props: Props<T>, state: State, index: number) => {\n    const { layout, tabWidths } = state;\n    const { scrollEnabled, tabStyle } = props;\n    const { routes } = props.navigationState;\n\n    const centerDistance = Array.from({ length: index + 1 }).reduce<number>(\n      (total, _, i) => {\n        const tabWidth = this.getComputedTabWidth(\n          i,\n          layout,\n          routes,\n          scrollEnabled,\n          tabWidths,\n          this.getFlattenedTabWidth(tabStyle)\n        );\n\n        // To get the current index centered we adjust scroll amount by width of indexes\n        // 0 through (i - 1) and add half the width of current index i\n        return total + (index === i ? tabWidth / 2 : tabWidth);\n      },\n      0\n    );\n\n    const scrollAmount = centerDistance - layout.width / 2;\n\n    return this.normalizeScrollValue(props, state, scrollAmount);\n  };\n\n  private resetScroll = (index: number) => {\n    if (this.props.scrollEnabled) {\n      this.scrollView &&\n        this.scrollView.scrollTo({\n          x: this.getScrollAmount(this.props, this.state, index),\n          animated: true,\n        });\n    }\n  };\n\n  private handleLayout = (e: LayoutChangeEvent) => {\n    const { height, width } = e.nativeEvent.layout;\n\n    if (\n      this.state.layout.width === width &&\n      this.state.layout.height === height\n    ) {\n      return;\n    }\n\n    this.setState({\n      layout: {\n        height,\n        width,\n      },\n    });\n  };\n\n  private getTranslateX = memoize(\n    (scrollAmount: Animated.Node<number>, maxScrollDistance: number) =>\n      Animated.multiply(\n        Platform.OS === 'android' && I18nManager.isRTL\n          ? Animated.sub(maxScrollDistance, scrollAmount)\n          : scrollAmount,\n        I18nManager.isRTL ? 1 : -1\n      )\n  );\n\n  render() {\n    const {\n      position,\n      navigationState,\n      jumpTo,\n      scrollEnabled,\n      bounces,\n      getAccessibilityLabel,\n      getAccessible,\n      getLabelText,\n      getTestID,\n      renderBadge,\n      renderIcon,\n      renderLabel,\n      activeColor,\n      inactiveColor,\n      pressColor,\n      pressOpacity,\n      onTabPress,\n      onTabLongPress,\n      tabStyle,\n      labelStyle,\n      indicatorStyle,\n      contentContainerStyle,\n      style,\n      indicatorContainerStyle,\n    } = this.props;\n    const { layout, tabWidths } = this.state;\n    const { routes } = navigationState;\n\n    const isWidthDynamic = this.getFlattenedTabWidth(tabStyle) === 'auto';\n    const tabBarWidth = this.getTabBarWidth(this.props, this.state);\n    const tabBarWidthPercent = `${routes.length * 40}%`;\n    const translateX = this.getTranslateX(\n      this.scrollAmount,\n      this.getMaxScrollDistance(tabBarWidth, layout.width)\n    );\n\n    return (\n      <Animated.View\n        onLayout={this.handleLayout}\n        style={[styles.tabBar, style]}\n      >\n        <Animated.View\n          pointerEvents=\"none\"\n          style={[\n            styles.indicatorContainer,\n            scrollEnabled ? { transform: [{ translateX }] as any } : null,\n            tabBarWidth\n              ? { width: tabBarWidth }\n              : scrollEnabled\n              ? { width: tabBarWidthPercent }\n              : null,\n            indicatorContainerStyle,\n          ]}\n        >\n          {this.props.renderIndicator({\n            position,\n            layout,\n            navigationState,\n            jumpTo,\n            width: isWidthDynamic ? 'auto' : `${100 / routes.length}%`,\n            style: indicatorStyle,\n            getTabWidth: this.getMemoizedTabWidthGettter(\n              layout,\n              routes,\n              scrollEnabled,\n              tabWidths,\n              this.getFlattenedTabWidth(tabStyle)\n            ),\n          })}\n        </Animated.View>\n        <View style={styles.scroll}>\n          <Animated.ScrollView\n            horizontal\n            keyboardShouldPersistTaps=\"handled\"\n            scrollEnabled={scrollEnabled}\n            bounces={bounces}\n            alwaysBounceHorizontal={false}\n            scrollsToTop={false}\n            showsHorizontalScrollIndicator={false}\n            automaticallyAdjustContentInsets={false}\n            overScrollMode=\"never\"\n            contentContainerStyle={[\n              styles.tabContent,\n              scrollEnabled\n                ? { width: tabBarWidth || tabBarWidthPercent }\n                : styles.container,\n              contentContainerStyle,\n            ]}\n            scrollEventThrottle={16}\n            onScroll={Animated.event([\n              {\n                nativeEvent: {\n                  contentOffset: { x: this.scrollAmount },\n                },\n              },\n            ])}\n            ref={el => {\n              // @ts-ignore\n              this.scrollView = el && el.getNode();\n            }}\n          >\n            {routes.map((route: T) => (\n              <TabBarItem\n                onLayout={\n                  isWidthDynamic\n                    ? e => {\n                        this.measuredTabWidths[route.key] =\n                          e.nativeEvent.layout.width;\n\n                        // When we have measured widths for all of the tabs, we should updates the state\n                        // We avoid doing separate setState for each layout since it triggers multiple renders and slows down app\n                        if (\n                          routes.every(\n                            r =>\n                              typeof this.measuredTabWidths[r.key] === 'number'\n                          )\n                        ) {\n                          this.setState({\n                            tabWidths: { ...this.measuredTabWidths },\n                          });\n                        }\n                      }\n                    : undefined\n                }\n                key={route.key}\n                position={position}\n                route={route}\n                navigationState={navigationState}\n                getAccessibilityLabel={getAccessibilityLabel}\n                getAccessible={getAccessible}\n                getLabelText={getLabelText}\n                getTestID={getTestID}\n                renderBadge={renderBadge}\n                renderIcon={renderIcon}\n                renderLabel={renderLabel}\n                activeColor={activeColor}\n                inactiveColor={inactiveColor}\n                pressColor={pressColor}\n                pressOpacity={pressOpacity}\n                onPress={() => {\n                  const event: Scene<T> & Event = {\n                    route,\n                    defaultPrevented: false,\n                    preventDefault: () => {\n                      event.defaultPrevented = true;\n                    },\n                  };\n\n                  onTabPress && onTabPress(event);\n\n                  if (event.defaultPrevented) {\n                    return;\n                  }\n\n                  this.props.jumpTo(route.key);\n                }}\n                onLongPress={() => onTabLongPress && onTabLongPress({ route })}\n                labelStyle={labelStyle}\n                style={tabStyle}\n              />\n            ))}\n          </Animated.ScrollView>\n        </View>\n      </Animated.View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  scroll: {\n    overflow: 'scroll',\n  },\n  tabBar: {\n    backgroundColor: '#2196f3',\n    elevation: 4,\n    shadowColor: 'black',\n    shadowOpacity: 0.1,\n    shadowRadius: StyleSheet.hairlineWidth,\n    shadowOffset: {\n      height: StyleSheet.hairlineWidth,\n      width: 0,\n    },\n    zIndex: 1,\n  },\n  tabContent: {\n    flexDirection: 'row',\n    flexWrap: 'nowrap',\n  },\n  indicatorContainer: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n  },\n});\n"]}